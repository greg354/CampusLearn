@model CampusLearnPlatform.Models.ViewModels.DashboardViewModel
@{
    ViewData["Title"] = "Dashboard";
}

<div class="dashboard-container">
    <div class="container">
        <!-- Welcome Section -->
        <div class="welcome-card fade-in-up">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1>Welcome back, @Model.UserName! 👋</h1>
                    <p>Ready to continue your learning journey? Check out what's new and stay connected with your study community.</p>
                </div>
                <div class="col-md-4 text-md-end">
                    <div class="d-flex gap-2 justify-content-md-end justify-content-start mt-3 mt-md-0">
                        <button class="btn btn-light" onclick="showComingSoon('AI Chat')">
                            <i class="fas fa-robot me-2"></i>AI Tutor
                        </button>
                        <button class="btn btn-light" onclick="showComingSoon('Ask Question')">
                            <i class="fas fa-question-circle me-2"></i>Ask Question
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Stats -->
        <div class="row mb-4">
            <div class="col-md-3 col-sm-6 mb-3">
                <div class="stats-card fade-in-up" style="animation-delay: 0.1s;">
                    <div class="stats-icon">
                        <i class="fas fa-book-open"></i>
                    </div>
                    <div class="stats-number">@Model.SubscribedTopics</div>
                    <div class="stats-label">Subscribed Topics</div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6 mb-3">
                <div class="stats-card fade-in-up" style="animation-delay: 0.2s;">
                    <div class="stats-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <div class="stats-number">@Model.TutorResponses</div>
                    <div class="stats-label">Tutor Responses</div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6 mb-3">
                <div class="stats-card fade-in-up" style="animation-delay: 0.3s;">
                    <div class="stats-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stats-number">@Model.CompletedSessions</div>
                    <div class="stats-label">Completed Sessions</div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6 mb-3">
                <div class="stats-card fade-in-up" style="animation-delay: 0.4s;">
                    <div class="stats-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stats-number">@Model.ActiveDiscussions</div>
                    <div class="stats-label">Active Discussions</div>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Recent Activity -->
            <div class="col-lg-8 mb-4">
                <div class="activity-feed fade-in-up" style="animation-delay: 0.5s;">
                    <div class="activity-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <h4><i class="fas fa-clock me-2"></i>Recent Activity</h4>
                            <button class="btn btn-sm btn-outline-primary" onclick="showComingSoon('View All Activities')">
                                View All
                            </button>
                        </div>
                    </div>

                    @if (Model.RecentActivities != null && Model.RecentActivities.Any())
                    {
                        @foreach (var activity in Model.RecentActivities)
                        {
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="@activity.Icon"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-description">@activity.Description</div>
                                    <div class="activity-time">@activity.TimeAgo</div>
                                </div>
                            </div>
                        }
                    }
                    else
                    {
                        <div class="activity-item text-center py-4">
                            <div class="text-muted">
                                <i class="fas fa-inbox fa-3x mb-3 text-secondary"></i>
                                <p>No recent activity yet. Start by subscribing to topics or asking questions!</p>
                                <button class="btn btn-primary" onclick="showComingSoon('Browse Topics')">
                                    <i class="fas fa-search me-2"></i>Browse Topics
                                </button>
                            </div>
                        </div>
                    }
                </div>
            </div>

            <!-- Quick Actions & Notifications -->
            <div class="col-lg-4">
                <!-- Quick Actions Card -->
                <div class="card shadow-custom mb-4 fade-in-up" style="animation-delay: 0.6s;">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-bolt me-2"></i>Quick Actions</h5>
                    </div>
                    <div class="card-body">
                        <div class="d-grid gap-2">
                            <button class="btn btn-outline-primary" onclick="showComingSoon('Find Tutor')">
                                <i class="fas fa-search me-2"></i>Find a Tutor
                            </button>
                            <button class="btn btn-outline-primary" onclick="showComingSoon('Join Forum')">
                                <i class="fas fa-comments me-2"></i>Join Discussion
                            </button>
                            <button class="btn btn-outline-primary" onclick="showComingSoon('Upload Material')">
                                <i class="fas fa-upload me-2"></i>Upload Material
                            </button>
                            <button class="btn btn-outline-primary" onclick="showComingSoon('Schedule Session')">
                                <i class="fas fa-calendar-plus me-2"></i>Schedule Session
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Study Tips Card -->
                <div class="card shadow-custom fade-in-up" style="animation-delay: 0.7s;">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-lightbulb me-2"></i>Study Tip of the Day</h5>
                    </div>
                    <div class="card-body">
                        <div class="text-center">
                            <i class="fas fa-quote-left text-primary fa-2x mb-3"></i>
                            <p class="card-text">"The best way to learn is to teach others. Consider becoming a peer tutor to reinforce your own knowledge!"</p>
                            <small class="text-muted">— CampusLearn™ Team</small>
                        </div>
                        <div class="mt-3 text-center">
                            <button class="btn btn-sm btn-primary" onclick="showComingSoon('Become Tutor')">
                                <i class="fas fa-chalkboard-teacher me-2"></i>Become a Tutor
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Upcoming Features Banner -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card bg-gradient-primary text-white shadow-custom fade-in-up" style="animation-delay: 0.8s;">
                    <div class="card-body text-center py-4">
                        <h4><i class="fas fa-rocket me-2"></i>Coming Soon!</h4>
                        <p class="mb-3">We're working hard to bring you these exciting new features:</p>
                        <div class="row">
                            <div class="col-md-3 col-6 mb-2">
                                <small><i class="fas fa-robot me-2"></i>AI Study Assistant</small>
                            </div>
                            <div class="col-md-3 col-6 mb-2">
                                <small><i class="fas fa-video me-2"></i>Video Tutoring</small>
                            </div>
                            <div class="col-md-3 col-6 mb-2">
                                <small><i class="fas fa-gamepad me-2"></i>Study Gamification</small>
                            </div>
                            <div class="col-md-3 col-6 mb-2">
                                <small><i class="fas fa-mobile-alt me-2"></i>Mobile App</small>
                            </div>
                        </div>
                        <small class="opacity-75">Stay tuned for updates!</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Dashboard interactivity
        document.addEventListener('DOMContentLoaded', function() {
            // Animate stats numbers
            document.querySelectorAll('.stats-number').forEach((number, index) => {
                setTimeout(() => {
                    animateNumber(number, parseInt(number.textContent));
                }, index * 200);
            });
        });

        // Animate numbers counting up
        function animateNumber(element, target) {
            let current = 0;
            const increment = Math.ceil(target / 30);
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                    element.style.transform = 'scale(1.1)';
                    setTimeout(() => {
                        element.style.transform = 'scale(1)';
                    }, 200);
                }
                element.textContent = current;
            }, 50);
        }

        // Add hover effects to activity items
        document.querySelectorAll('.activity-item').forEach(item => {
            item.addEventListener('mouseenter', function() {
                this.style.transform = 'translateX(10px)';
            });

            item.addEventListener('mouseleave', function() {
                this.style.transform = 'translateX(0)';
            });
        });
    </script>
}